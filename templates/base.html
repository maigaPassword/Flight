<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Skyvela ✈️ | Find Cheaper Flights</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body{% block body_class %}{% endblock %}>

    <!-- Navigation -->
    <header>
        <nav class="navbar">
            <div class="logo">Skyvela</div>
            <button class="burger-menu" aria-label="Toggle navigation" aria-expanded="false" 
                    onclick="this.classList.toggle('active'); document.querySelector('.nav-links').classList.toggle('active'); this.setAttribute('aria-expanded', this.classList.contains('active'));">
                <span class="burger-line"></span>
                <span class="burger-line"></span>
                <span class="burger-line"></span>
            </button>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="/contact">Contact</a></li>
                {% if session.get('user_id') %}
                <li><a href="{{ url_for('user_portal') }}">My Information</a></li>
                {% endif %}
            </ul>
                        <!-- Auth actions -->
                        <div class="nav-auth">
                            {% if session.get('user_id') %}
                                <span class="auth-user" style="margin-right:.75rem;">Hi, {{ session.get('user_name') }}</span>
                                <a class="auth-link logout-link" href="{{ url_for('logout') }}">Logout</a>
                            {% else %}
                                <a class="auth-link login-link" href="{{ url_for('login') }}">Login</a>
                            {% endif %}
                        </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
                <!-- Flash messages -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                                    <div class="flash-messages" style="max-width:1200px;margin:1rem auto 0;padding:0 1rem;">
                            {% for category, message in messages %}
                                            <div class="flash flash-{{ category }}">
                                    {{ message }}
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endwith %}
        {% block content %}
        <section class="hero">
            <h1>Find the Best Deals on Flights</h1>
            <p>Search, compare, and save with Skyvela.</p>
            <a href="/search" class="btn">Get Started</a>
        </section>
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Skyvela Group 5 | Powered by Flask + Amadeus API</p>
    </footer>

    <!-- Load airports data as global JavaScript variable -->
    <script>
        window.AIRPORTS = {{ (AIRPORTS or {}) | tojson | safe }};
        console.log('✈️ Loaded', Object.keys(window.AIRPORTS || {}).length, 'airports');
    </script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>